{"mappings":"AAAO,MAGMA,EAAiB,CAC5BC,IAHqB,qCAIrBC,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,SAAU,MCNGC,eAAAC,GAA2BC,EAAEA,EAAI,GAAEC,KAAEA,EAAO,MACzD,IACE,MAAMC,EAAc,IAAIC,gBAAgB,IACnCX,E,KAAgBS,E,EAAMD,IAErBI,QAAiBC,MAAM,2BAAeH,KAC5C,IAAKE,EAASE,GACZ,OAAwB,MAApBF,EAASG,OACJ,GAEF,CAAEC,MAAOJ,EAASG,QAG3B,MAAQE,KAAMC,SAAiBN,EAASO,OACxC,OAAOD,C,CACP,MAAOE,GACP,MAAO,CAAEJ,MAAOI,EAAEC,W,EChBtB,MAAMC,EAAkBC,IACtB,MAAMC,EAAMC,SAASC,cAAc,OAGnC,OAFAF,EAAIG,UAAUC,IAAI,SAClBJ,EAAIK,IAAMN,EAAMO,aACTN,CAAG,EAaLlB,eAAeyB,GAAWvB,EAAEA,EAACC,KAAEA,IACpC,MAAMS,QAAeX,EAAY,C,EAAEC,E,KAAGC,IAClCS,EAAOF,MACTgB,MAAMd,EAAOF,OAbjB,UAAoBE,OAAEA,EAAMT,KAAEA,IAC5B,MAAMwB,EAAiBR,SAASS,cAAc,WACjC,MAATzB,IACFwB,EAAeE,UAAY,IAG7B,MAAMC,EAAUlB,EAAOmB,IAAIf,GAC3BW,EAAeK,UAAUF,E,CASzBG,CAAW,C,OAAErB,E,KAAQT,G,CCtBvB,MAAM+B,EAAaf,SAASS,cAAc,gBAE1CM,EAAWC,iBAAiB,UCHrBnC,eAA+Bc,GACpCA,EAAEsB,iBACFtB,EAAEuB,OAAOlC,KAAKmC,MAAQ,IACtB,MAAMpC,EAAIY,EAAEuB,OAAOnC,EAAEoC,YACfb,EAAW,C,EAAEvB,EAAGC,KAAM,K,IDA9B+B,EAAWK,cAAc,IAAIC,MAAM,WAEnCC,OAAON,iBAAiB,UCCjBnC,iBACL,MAAM0C,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBzB,SAAS0B,gBAC3D,GAAIH,EAAYE,GAAgBD,EAAc,CAC5C,MAAMG,EAAa3B,SAASS,cAAc,qBACpCzB,EAAO4C,SAASD,EAAW3C,KAAKmC,OACtCQ,EAAW3C,KAAKmC,MAAQnC,EAAO,QACzBsB,EAAW,CAAEvB,EAAG4C,EAAW5C,EAAEoC,MAAOnC,KAAM2C,EAAW3C,KAAKmC,O","sources":["src/scripts/API-config.js","src/scripts/pixabay.js","src/scripts/ui.js","src/scripts/index.js","src/scripts/handlers.js"],"sourcesContent":["export const API_PATH = 'https://pixabay.com/api';\nexport const API_KEY = '36802043-6369625f376675122720202cd';\n\nexport const DEFAULT_PARAMS = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: '20',\n};\n","import { API_PATH, DEFAULT_PARAMS } from './API-config.js';\n\nexport default async function pingPixabay({ q = '', page = '1' }) {\n  try {\n    const queryString = new URLSearchParams({ \n      ...DEFAULT_PARAMS, page, q });\n\n    const response = await fetch(`${API_PATH}?${queryString}`);\n    if (!response.ok) {\n      if (response.status === 400) {\n        return [];\n      }\n      return { error: response.status };\n    }\n\n    const { hits: photos } = await response.json();\n    return photos;\n  } catch (e) {\n    return { error: e.toString() };\n  }\n}\n","import pingPixabay from './pixabay.js';\n\nconst getPhotoElement = photo => {\n  const img = document.createElement('img');\n  img.classList.add('photo');\n  img.src = photo.webformatURL;\n  return img;\n};\n\nfunction drawPhotos({ photos, page }) {\n  const photoContainer = document.querySelector('#photos');\n  if (page === '1') {\n    photoContainer.innerHTML = '';\n  }\n\n  const gallery = photos.map(getPhotoElement);\n  photoContainer.append(...gallery);\n}\n\nexport async function loadPhotos({ q, page }) {\n  const photos = await pingPixabay({ q, page });\n  if (photos.error) {\n    alert(photos.error);\n    return;\n  }\n  drawPhotos({ photos, page });\n  return;\n}\n","// import '../css/styles.css';\nimport { searchForPhotos, scrollHandler } from './handlers.js';\n\nconst searchForm = document.querySelector('#search-form');\n\nsearchForm.addEventListener('submit', searchForPhotos);\nsearchForm.dispatchEvent(new Event('submit'));\n\nwindow.addEventListener('scroll', scrollHandler);\n","import { loadPhotos } from './ui.js';\n\nexport async function searchForPhotos(e) {\n  e.preventDefault();\n  e.target.page.value = '1';\n  const q = e.target.q.value;\n  await loadPhotos({ q, page: '1' });\n}\n\nexport async function scrollHandler() {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  if (scrollTop + clientHeight >= scrollHeight) {\n    const searchForm = document.querySelector('#searchPhotosForm');\n    const page = parseInt(searchForm.page.value);\n    searchForm.page.value = page + 1;\n    await loadPhotos({ q: searchForm.q.value, page: searchForm.page.value });\n  }\n}\n"],"names":["$c2b43079f320bcf8$export$ed0a8b5e284442ac","key","image_type","orientation","safesearch","per_page","async","$1bc7e69042d4f9f8$export$2e2bcd8739ae039","q","page","queryString","URLSearchParams","response","fetch","ok","status","error","hits","photos","json","e","toString","$f5109b0431ee0ed3$var$getPhotoElement","photo","img","document","createElement","classList","add","src","webformatURL","$f5109b0431ee0ed3$export$345071c5d7c214f4","alert","photoContainer","querySelector","innerHTML","gallery","map","append","$f5109b0431ee0ed3$var$drawPhotos","$5ea9d3ddee2c9b94$var$searchForm","addEventListener","preventDefault","target","value","dispatchEvent","Event","window","scrollTop","scrollHeight","clientHeight","documentElement","searchForm","parseInt"],"version":3,"file":"index.fd72c797.js.map"}